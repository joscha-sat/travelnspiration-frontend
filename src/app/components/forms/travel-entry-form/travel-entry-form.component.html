<mat-card class="mw600">
    <mat-card-title *ngIf="mode === 'add'" class="header">
        {{ 'ADD_POST.ADD' | translate }}
    </mat-card-title>

    <mat-card-title *ngIf="mode === 'edit'" class="header">
        {{ 'ADD_POST.EDIT' | translate }}
    </mat-card-title>

    <form (ngSubmit)="form.valid && onSubmit()" [formGroup]="form">
        <!-- TITLE -->
        <app-base-text-input
            [formGroup]="form"
            [required]="true"
            class="flexChild"
            fName="title"
            icon="title"
            title="{{ 'ADD_POST.TITLE' | translate }}"
        ></app-base-text-input>

        <!-- TITLE ERROR -->
        <app-base-validation-error
            [form]="form"
            fName="title"
            ngxTranslate="ERROR.REQUIRED.TITLE"
            ngxTranslate2="ERROR.MINLENGTH.TITLE"
            validator="required"
            validator2="minlength"
        ></app-base-validation-error>

        <!-- //  -------------------------------------------------------------------------- // -->

        <div class="container flex">
            <div class="flexChild" style="min-width: 17rem">
                <!-- STATE -->
                <app-base-select
                    [array]="states"
                    [formGroup]="form"
                    fName="state"
                    title="{{ 'ADD_POST.STATE' | translate }}"
                ></app-base-select>

                <!-- STATE ERROR -->
                <app-base-validation-error
                    [form]="form"
                    fName="state"
                    ngxTranslate="ERROR.REQUIRED.STATE"
                    validator="required"
                ></app-base-validation-error>
            </div>

            <!-- //  -------------------------------------------------------------------------- // -->

            <div class="flexChild">
                <!-- LOCATION -->
                <app-base-text-input
                    [formGroup]="form"
                    [required]="true"
                    fName="location"
                    icon="explore"
                    title="{{ 'ADD_POST.LOCATION' | translate }}"
                ></app-base-text-input>

                <!-- LOCATION ERROR -->
                <app-base-validation-error
                    [form]="form"
                    fName="location"
                    ngxTranslate="ERROR.REQUIRED.LOCATION"
                    validator="required"
                ></app-base-validation-error>
            </div>
        </div>

        <!-- //  -------------------------------------------------------------------------- // -->

        <!-- DESCRIPTION -->
        <app-base-text-area-input
            [formGroup]="form"
            [required]="true"
            fName="description"
            title="{{ 'ADD_POST.DESCRIPTION' | translate }}"
        ></app-base-text-area-input>

        <!-- DESCRIPTION ERROR -->
        <app-base-validation-error
            [form]="form"
            fName="description"
            ngxTranslate="ERROR.REQUIRED.DESCRIPTION"
            ngxTranslate2="ERROR.MINLENGTH.DESCRIPTION"
            validator="required"
            validator2="minlength"
        ></app-base-validation-error>

        <div class="container flex">
            <!-- HOUSING TYPE -->
            <app-base-text-input
                [formGroup]="form"
                fName="housing"
                icon="house"
                title="{{ 'ADD_POST.HOUSING' | translate }}"
            ></app-base-text-input>

            <!-- TYPE OF TRAVEL -->
            <app-base-text-input
                [formGroup]="form"
                class="flexChild"
                fName="travelType"
                icon="forest"
                title="{{ 'ADD_POST.TYPE_OF_TRAVEL' | translate }}"
            ></app-base-text-input>
        </div>

        <!-- COSTS TOTAL -->
        <app-base-number-input
            [formGroup]="form"
            fName="costsTotal"
            icon="euros"
            title="{{ 'ADD_POST.TOTAL_COSTS' | translate }}"
        ></app-base-number-input>

        <!-- COST INFO -->
        <app-base-text-area-input
            [formGroup]="form"
            fName="costInfo"
            title="{{ 'ADD_POST.COSTS_INFO' | translate }}"
        ></app-base-text-area-input>

        <!-- OTHER  -->
        <app-base-text-area-input
            [formGroup]="form"
            fName="other"
            title="{{ 'ADD_POST.OTHER' | translate }}"
        ></app-base-text-area-input>

        <!--  IMAGE INPUT  -->
        <div *ngIf="mode === 'add'" class="imageUpload">
            <button
                (click)="fileInput.click()"
                color="primary"
                mat-flat-button
                type="button"
            >
                {{ 'ADD_POST.IMAGE_UPLOAD' | translate }}
            </button>
            <input
                #fileInput
                (change)="onImagePicked($event)"
                hidden
                id="file"
                multiple="multiple"
                type="file"
            />
        </div>

        <!-- IMAGE PREVIEW -->
        <div *ngIf="previews && previews.length" style="padding-top: 1rem">
            <div class="label">
                <label> {{ 'ADD_POST.PREVIEW' | translate }} </label>
            </div>

            <div style="display: flex; gap: 1rem; flex-wrap: wrap">
                <img
                    *ngFor="let src of previews"
                    [src]="src"
                    alt="Preview"
                    class="preview"
                />
            </div>
        </div>

        <!-- ---------------------------------------------------------------------------- -->

        <div style="padding: 2rem">
            <mat-divider></mat-divider>
        </div>

        <!-- SUBMIT BUTTON -->

        <mat-card-actions
            style="padding-left: 1rem; padding-top: 1rem; padding-bottom: 1rem"
        >
            <button
                [disabled]="!form.valid"
                color="accent"
                mat-flat-button
                type="submit"
            >
                {{ 'ADD_POST.SAVE' | translate }}
            </button>
        </mat-card-actions>
    </form>
</mat-card>
